import sys
import socket

#리다이렉트 최대 5번
MAX_REDIRECTS = 5

class SimpleHttpClient:
    def __init__(self, url):
        self.original_url = url
        self.redirect_count = 0

    def validate_url(self, url):
        if not url.startswith("http://"):
            sys.stderr.write("Error: URL must start with 'http://'\n")
            sys.exit(1)
        return url[len("http://"):]

    def parse_url(self, url):
        url = self.validate_url(url)
        parts = url.split("/", 1)
        host_port = parts[0]
        path = "/" + parts[1] if len(parts) > 1 else "/"

        if ':' in host_port:
            host, port_str = host_port.split(":", 1)
            if not port_str.isdigit():
                sys.stderr.write("Error: Invalid port number\n")
                sys.exit(1)
            port = int(port_str)
        else:
            host = host_port
            port = 80

        return host, port, path
